<script setup lang="ts">
import { ref, onMounted } from 'vue' // 1. Vueã®ä¾¿åˆ©ãªé“å…·ã‚’å€Ÿã‚Šã¦ãã‚‹ã‚ˆ

// 2. ç”»é¢ã«è¡¨ç¤ºã™ã‚‹ãŸã‚ã®ã€Œç©ºã£ã½ã®ç®±ã€ã‚’ç”¨æ„ã™ã‚‹ã‚ˆ
const serverMessage = ref('') 

// 3. ç”»é¢ãŒãƒ‘ãƒƒã¨è¡¨ç¤ºã•ã‚ŒãŸç¬é–“ã«ã€è‡ªå‹•ã§å‹•ãé­”æ³•ã‚’ã‹ã‘ã‚‹ã‚ˆ
onMounted(async () => {
  // 4. ãŠåº—ï¼ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼‰ã«ã€Œãƒ‡ãƒ¼ã‚¿ã¡ã‚‡ã†ã ã„ï¼ã€ã£ã¦ãƒ¡ãƒ¼ãƒ«ã‚’é€ã‚‹ã‚ˆ
  const response = await fetch('/api/hello') 
  
  // 5. è¿”ã£ã¦ããŸãƒ¡ãƒ¼ãƒ«ã®å†…å®¹ï¼ˆJSONï¼‰ã‚’èª­ã¿å–ã‚‹ã‚ˆ
  const data = await response.json()
  
  // 6. èª­ã¿å–ã£ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã€ã•ã£ãã®ã€Œç®±ã€ã«å…¥ã‚Œã‚‹ã‚ˆï¼
  serverMessage.value = data.message
})
</script>

<template>
  <div style="text-align: center; margin-top: 50px; font-family: sans-serif;">
    
    <h1 style="color: #42b883;">Vue ğŸš€ Node.js</h1>
    
    <div style="background: #f0f0f0; padding: 20px; border-radius: 10px; display: inline-block;">
      <p>ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ã®è¿”äº‹ï¼š</p>
      <strong style="font-size: 1.5rem; color: #35495e;">
        {{ serverMessage || 'èª­ã¿è¾¼ã¿ä¸­...' }}
      </strong>
    </div>

  </div>
</template>